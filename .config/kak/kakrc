# colorscheme
colorscheme gruvbox

# don't display autocomplete by default
set-option global autocomplete prompt

# turn off ui ncurses_assistant
set-option global ui_options ncurses_assistant=none

# map jk to esc 
# hook global InsertChar k %{ try %{
#     exec -draft hH <a-k>jk<ret> d
#     exec -with-hooks <esc>
# }}

# System Copy and Paste
hook global RegisterModified '"' %{ nop %sh{
    printf %s "$kak_main_reg_dquote" | xsel --input --clipboard
}}
map global user P 'xsel --output --clipboard<ret>'
map global user p '<a-!>xsel --output --clipboard<ret>'

# line numbers 
# add-highlighter global/ number-lines -relative

# tab stuff
set global indentwidth 4
set global tabstop 4

# change color during insert mode (only looks good with gruvbox)
hook global ModeChange push:.*:insert %{
    set-face window PrimaryCursor rgb:ebdbb2,rgb:484848
    set-face window PrimaryCursorEol rgb:ebdbb2,rgb:484848
    set-face window PrimarySelection rgb:ebdbb2,rgb:323232
}
hook global ModeChange pop:insert:.* %{
    unset-face window PrimaryCursor
    unset-face window PrimaryCursorEol
    unset-face window PrimarySelection
}

# dmenu
define-command dmenu-buffers -docstring 'Select an open buffer using dmenu' %{ evaluate-commands %sh{
      BUFFER=$(printf "%s\n" "${kak_buflist}" | tr " " "\n" | dmenu | tr -d \')
      if [ -n "$BUFFER" ]; then
          printf "%s\n" "buffer ${BUFFER}"
      fi
  }
}
map global user b dmenu-buffers
